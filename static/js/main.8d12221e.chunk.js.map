{"version":3,"sources":["components/App/App.jsx","index.tsx"],"names":["App","video","useRef","useState","played","setPlayed","volume","setVolume","useEffect","navigator","mediaDevices","getUserMedia","audio","then","stream","current","srcObject","play","audioContext","AudioContext","analyser","createAnalyser","microphone","createMediaStreamSource","javascriptNode","createScriptProcessor","smoothingTimeConstant","fftSize","connect","destination","addEventListener","values","array","Uint8Array","frequencyBinCount","getByteFrequencyData","i","length","average","catch","error","console","log","className","width","height","ref","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"mMA4DeA,EA1DI,WACjB,IAAMC,EAAQC,mBADS,EAEKC,oBAAS,GAFd,mBAEhBC,EAFgB,KAERC,EAFQ,OAGKF,mBAAS,GAHd,mBAGhBG,EAHgB,KAGRC,EAHQ,KAgDvB,OA3CAC,qBAAU,WACRC,UAAUC,aAAaC,aAAa,CAClCC,OAAO,EACPX,OAAO,IACNY,MAAK,SAACC,GACPb,EAAMc,QAAQC,UAAYF,EAC1Bb,EAAMc,QAAQE,OAEd,IAAMC,EAAe,IAAIC,aACnBC,EAAWF,EAAaG,iBACxBC,EAAaJ,EAAaK,wBAAwBT,GAClDU,EAAiBN,EAAaO,sBAAsB,KAAM,EAAG,GAEnEL,EAASM,sBAAwB,GACjCN,EAASO,QAAU,KAEnBL,EAAWM,QAAQR,GACnBA,EAASQ,QAAQJ,GACjBA,EAAeI,QAAQV,EAAaW,aAEpCL,EAAeM,iBAAiB,gBAAgB,WAC9C,IAAIC,EAAS,EACPC,EAAQ,IAAIC,WAAWb,EAASc,mBACtCd,EAASe,qBAAqBH,GAE9B,IAAK,IAAII,EAAI,EAAGA,EAAIJ,EAAMK,OAAQD,IAChCL,GAAWC,EAAMI,GAGnB,IAAME,EAAUP,EAASC,EAAMK,OAG7BhC,EADEiC,GAAW,GAKf/B,EAAU+B,SAEXC,OAAM,SAACC,GACRC,QAAQC,IAAI,yCAAYF,QAEzB,IAGD,yBAAKG,UAAW,OACd,2BAAOC,MAAO,IAAKC,OAAQ,OAAQC,IAAK7C,IACxC,yBAAK0C,UAAW,SAAWvC,EAAS,YAAc,aAAlD,0DACaE,K,KCjDnByC,IAASC,OACL,kBAAC,IAAMC,WAAP,KACI,kBAAC,EAAD,OAEJC,SAASC,eAAe,U","file":"static/js/main.8d12221e.chunk.js","sourcesContent":["import React, {useEffect, useRef, useState} from 'react'\n\nexport const App = () => {\n  const video = useRef() // сам video\n  const [played, setPlayed] = useState(false) // меняем цвет кнопки\n  const [volume, setVolume] = useState(0)\n\n  useEffect(() => {\n    navigator.mediaDevices.getUserMedia({\n      audio: true,\n      video: true\n    }).then((stream) => {\n      video.current.srcObject = stream;\n      video.current.play();\n\n      const audioContext = new AudioContext();\n      const analyser = audioContext.createAnalyser();\n      const microphone = audioContext.createMediaStreamSource(stream);\n      const javascriptNode = audioContext.createScriptProcessor(2048, 1, 1);\n\n      analyser.smoothingTimeConstant = 0.8;\n      analyser.fftSize = 1024;\n\n      microphone.connect(analyser);\n      analyser.connect(javascriptNode);\n      javascriptNode.connect(audioContext.destination);\n\n      javascriptNode.addEventListener('audioprocess', () => {\n        let values = 0;\n        const array = new Uint8Array(analyser.frequencyBinCount);\n        analyser.getByteFrequencyData(array);\n\n        for (let i = 0; i < array.length; i++) {\n          values += (array[i]);\n        }\n\n        const average = values / array.length;\n\n        if (average >= 5) {\n          setPlayed(true)\n        } else {\n          setPlayed(false)\n        }\n        setVolume(average)\n      })\n    }).catch((error) => {\n      console.log(\"Ошибка: \", error);\n    });\n  }, [])\n\n  return (\n    <div className={'app'}>\n      <video width={400} height={'auto'} ref={video}/>\n      <div className={'play ' + (played ? 'play--yes' : 'play--no')}>\n        Громкость {volume}\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App/App'\nimport './index.scss'\n\nReactDOM.render(\n    <React.StrictMode>\n        <App/>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n"],"sourceRoot":""}